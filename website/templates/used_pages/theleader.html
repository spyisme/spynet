<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}" />

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.1.2/socket.io.js"></script>

      <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.1.2/socket.io.js"></script>
      <script src="{{ url_for('static', filename='java/connection.js') }}"></script>

    <title>Spy</title>

      <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/ashraf.css') }}">
    


      <style>
        /* CSS to make the dropdown font size bigger */
        select {
            font-size: 18px; /* Adjust this value for bigger font */
            padding: 5px; /* Optional: to increase the size of the dropdown box */
        }

        #results {
    font-size: 18px; /* Increase the font size */
    line-height: 1.6; /* Adjust the line spacing, higher value = more space */
    padding: 10px; /* Optional: add padding for better spacing inside the container */
    margin-top: 20px; /* Optional: space between the results container and other elements */
    border-radius: 5px; /* Optional: rounded corners */
}

        
    </style>

</head>
<body onload="startCountdown()">

    <section class="banner">
        <canvas id="canvas"></canvas>
        <div class="form-container">
            <p style="font-size: 43px;">The leader (By Spy)</p>

            <p>
                <a href="/" class="nohover">Home</a>
              </p><br>
            <hr>

            <select name="dropdown" id="dropdown">
   {%for x in lectures%}
   <option value="{{ x }}">{{ x }}</option>

   {% endfor %}

</select>



<div class="play-btn" style="width:50px; text-align: center;   margin-left: auto;
  margin-right: auto;" onclick="loadlec()">Load</div>


<div id="results" class="result-container"></div>


        <br>      
        <br>
        <br>
        <br>
        <br>
        <br>
          <div class="footer">
            <p id="countdown">Â© 2024 Sanawya sessions</p>
          </div>

        
    </section>

</body>

<script>
    async function loadlec() {
        // Get the selected option text
        var selectedOption = document.getElementById('dropdown').value;

        // Use a regular expression to extract the ID
        var idMatch = selectedOption.match(/ID\s*:\s*(\d+)/);

        if (idMatch) {
            var id = idMatch[1]; // The ID value extracted
            var url = "/subjects/english/theleader/session/" + id;

            try {
                // Send a GET request to the URL
                let response = await fetch(url);
                
                // Check if the response is successful
                if (!response.ok) {
                    throw new Error('Network response was not ok ' + response.statusText);
                }

                // Parse the JSON response
                let data = await response.json();

                // Display the data
                displayResults(data);
            } catch (error) {
                console.error('There was a problem with the fetch operation:', error);
            }
        } else {
            alert("ID not found in the selected option!");
        }
    }

    function displayResults(data) {
        // Get the results container
        var resultsContainer = document.getElementById('results');

        // Clear previous results
        resultsContainer.innerHTML = '';

        // Iterate over the JSON data and create elements for each item
        for (let key in data) {
            if (data.hasOwnProperty(key)) {
                // Create a div for each item
                let itemDiv = document.createElement('div');
                itemDiv.innerHTML = `<strong>${key}:</strong> ${data[key]}`;
                resultsContainer.appendChild(itemDiv);
            }
        }
    }
</script>



    <script src="{{ url_for('static', filename='java/snow.js') }}"></script>
    <script src="   {{ url_for('static', filename='java/countdown.js') }}"></script>
    <script src="   {{ url_for('static', filename='java/connection.js') }}"></script>


</html>